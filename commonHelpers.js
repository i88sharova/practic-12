import{S as L,i as n,a as p}from"./assets/vendor-81d29a5c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const v={lines:8,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#287176",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},d=document.querySelector(".js-backdrop"),S=document.querySelector(".js-search-form"),a=document.querySelector(".js-gallery");let l=1,c;const q={root:null,rootMargin:"100px",threshold:1},M=function(e,t){e.forEach(s=>{s.isIntersecting&&(t.unobserve(s.target),w())})},m=new L(v),O=new IntersectionObserver(M,q);S.addEventListener("submit",_);async function _(e){if(e.preventDefault(),c=e.target.elements["user-search-query"].value.trim(),y(),!c)return f(),a.innerHTML="",n.info({position:"topRight",message:"Error!!! - enter any symbol!"});try{const{data:{results:t,total:s,total_pages:i}}=await h(c,l);s===0?(a.innerHTML="",n.info({position:"topRight",message:"We found no one pictutes"})):(a.innerHTML=g(t),n.success({position:"topRight",message:`We found ${s} pictutes`}),b(i))}catch{n.error({position:"topRight",message:"Illegal operation"})}finally{f()}e.target.reset()}function g(e=[]){return e.map(t=>`<li class='gallery__item'>
        <img src='${t.urls.small}' alt='${t.alt_description}' class='gallery-img' />
        </li>`).join("")}function h(e,t){return p.defaults.baseURL="https://api.unsplash.com",p.defaults.headers.common.Authorization="Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc",p.get("/search/photos",{params:{query:e,page:t,query:e,per_page:12,orientation:"portrait"}})}function y(){m.spin(d),d.classList.remove("is-hidden")}function f(){m.stop(),d.classList.add("is-hidden")}async function w(){console.log("LOAD"),l+=1,y();try{const{data:{results:e,total_pages:t}}=await h(c,l);a.insertAdjacentHTML("beforeend",g(e)),b(t)}catch(e){console.log(e)}finally{f()}}function b(e){if(l<e){const t=document.querySelector(".gallery__item:last-child");O.observe(t)}else n.info({position:"topRight",message:" We're sorry, but you've reached the end of the search result"})}
//# sourceMappingURL=commonHelpers.js.map
